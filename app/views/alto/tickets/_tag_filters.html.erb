<div class="flex items-center gap-2">
  <span class="text-sm text-gray-500">Filter by tag:</span>

  <%= form_with url: board_tickets_path(@board), local: true, method: :get,
      class: "flex items-center gap-2" do |form| %>

    <!-- Preserve other filter parameters (same logic as filter_url_params) -->
    <%= form.hidden_field :search, value: params[:search] if params[:search].present? %>
    <%= form.hidden_field :sort, value: params[:sort] if params[:sort].present? %>
    <%= form.hidden_field :view, value: params[:view] if params[:view].present? %>
    <%= form.hidden_field :status, value: params[:status] if params[:status].present? %>

            <%= form.select :tag,
        options_for_select([['All tags', '']] + @tags.map { |tag| ["#{tag.name} (#{tag.tickets.count})", tag.name] }, params[:tag]),
        {},
        {
          class: "px-3 py-1 text-sm border border-gray-300 rounded-md bg-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500",
          onchange: "this.form.submit();"
        } %>

    <noscript>
      <%= form.submit "Filter", class: "px-3 py-1 text-sm bg-blue-600 text-white rounded-md hover:bg-blue-700" %>
    </noscript>
  <% end %>
</div>
